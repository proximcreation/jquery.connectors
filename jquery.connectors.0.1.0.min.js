(function(a){a.fn.connect=function(f,d,c,b){var h=this;if(!d){var d={x:0,y:0}}else{d.x=(d.x)?d.x:0;d.y=(d.y)?d.y:0}if(!c){var c={x:0,y:0}}else{c.x=(c.x)?c.x:0;c.y=(c.y)?c.y:0}if(!b){var b={"border-top":"#000 1px solid"}}var e=a("body").css("position");if(e=="static"){a("body").css("position","relative")}var g="connector"+(a(".connector").size()+1);a("body").append('<div class="connector '+g+'"></div>');var j=a("."+g);var n={h:h.realHeight(),w:h.realWidth(),x:h.findPos().x*1+h.realWidth()/2+d.x*1,y:h.findPos().y*1+h.realHeight()/2+d.y*1};var l={h:f.realHeight(),w:f.realWidth(),x:f.findPos().x*1+f.realWidth()/2+c.x*1,y:f.findPos().y*1+f.realHeight()/2+c.y*1};var m=dist(n,l);j.css({width:m.d+"px",position:"absolute",});for(v in b){j.css(v,b[v])}var o=j.realHeight();var p=browser();if(browser()[0]=="MSIE"&&browser()[1]<9){var i=n.y-o/2;var k=n.x;j.css("zoom","1");rotateIE(j,m.ad)}else{var i=(n.y*1+l.y*1)/2-o/2;var k=(n.x+l.x-m.d)/2;j.css({transform:"rotate("+m.ad+"deg)","-moz-transform":"rotate("+m.ad+"deg)","-webkit-transform":"rotate("+m.ad+"deg)","-o-transform":"rotate("+m.ad+"deg)","-ms-transform":"rotate("+m.ad+"deg)"})}j.css({top:i+"px",left:k+"px",});return this};a.fn.realWidth=function(){var d=this.padding(),c=this.border();return this.width()*1+d.left*1+d.right*1+c.left*1+c.right*1};a.fn.realHeight=function(){var d=this.padding(),c=this.border();return this.height()*1+d.top*1+d.bottom*1+c.top*1+c.bottom*1};a.fn.findPos=function(){obj=this.get(0);var c=obj.offsetLeft||0;var b=obj.offsetTop||0;while(obj=obj.offsetParent){c+=obj.offsetLeft||0;b+=obj.offsetTop||0}return{x:c,y:b}};a.fn.padding=function(b){if(!b){return{top:parseFloat(this.css("padding-top")),bottom:parseFloat(this.css("padding-bottom")),left:parseFloat(this.css("padding-left")),right:parseFloat(this.css("padding-right"))}}else{this.css({"padding-top":b.top,"padding-right":b.right,"padding-bottom":b.bottom,"padding-left":b.left})}};a.fn.border=function(b){if(!b){return{top:parseFloat(this.css("border-top-width")),bottom:parseFloat(this.css("border-bottom-width")),left:parseFloat(this.css("border-left-width")),right:parseFloat(this.css("border-right-width"))}}else{this.css({"border-top-width":b.top,"border-right-width":b.right,"border-bottom-width":b.bottom,"border-left-width":b.left})}}})(jQuery);function dist(b,g){var e=b.x-g.x;var d=b.y-g.y;var f=Math.sqrt(Math.pow(e,2)*1+Math.pow(d,2)*1);var c=Math.atan(d/e);return{d:f,dx:e,dy:d,ad:180*c/Math.PI,ar:c}}function rotateIE(d,c){var a=Math.PI*2/360;var b=c*a;lCostheta=Math.cos(b);lSintheta=Math.sin(b);d.css("filter","progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',M11="+lCostheta+",M12="+-lSintheta+",M21="+lSintheta+",M22="+lCostheta+")");d.css("-ms-filter","progid:DXImageTransform.Microsoft.Matrix(M11="+lCostheta+",M12="+-lSintheta+",M21="+lSintheta+",M22="+lCostheta+",sizingMethod='auto expand')")}function browser(){var c=navigator.appName,b=navigator.userAgent,a;var d=b.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);if(d&&(a=b.match(/version\/([\.\d]+)/i))!=null){d[2]=a[1]}d=d?[d[1],d[2]]:[c,navigator.appVersion,"-?"];return d}function debug(a,c){var b="cross"+jQuery(".cross").size()+1;jQuery("body").append("<div class='cross "+b+"'></div>");jQuery("."+b).css({left:a+"px",top:c+"px",height:"5px",width:"5px","background-color":"red",position:"absolute","z-index":10000})};
